#include <iostream>
#include <vector>
#include <iomanip>

using namespace std;

const int ROWS = 10;
const int COLS = 10;

void displaySeats(const vector<vector<int>>& seats);
void reserveSeat(vector<vector<int>>& seats);
void cancelSeat(vector<vector<int>>& seats);
void analyzeRows(const vector<vector<int>>& seats);

int main() {
    vector<vector<int>> busSeats(ROWS, vector<int>(COLS, 0));
    int choice;

    do {
        cout << "--- BUS SEATING MENU ---" << endl;
        cout << "1. Display Seating Chart" << endl;
        cout << "2. Reserve a Seat" << endl;
        cout << "3. Cancel a Reservation" << endl;
        cout << "4. Analyze Row Occupancy" << endl;
        cout << "5. Exit" << endl;
        cout << "Enter choice: ";
        cin >> choice;

        switch (choice) {
            case 1:
                displaySeats(busSeats);
                break;
            case 2:
                reserveSeat(busSeats);
                break;
            case 3:
                cancelSeat(busSeats);
                break;
            case 4:
                analyzeRows(busSeats);
                break;
            case 5:
                cout << "Exiting system..." << endl;
                break;
            default:
                cout << "Invalid choice. Please try again." << endl;
        }
    } while (choice != 5);

    return 0;
}

void displaySeats(const vector<vector<int>>& seats) {
    cout << "\n   ";
    for (int k = 1; k <= COLS; k++) cout << k << " ";
    cout << "\n";

    for (int i = 0; i < ROWS; ++i) {
        cout << left << setw(2) << (i + 1) << " ";
        for (int j = 0; j < COLS; ++j) {
            if (seats[i][j] == 0)
                cout << "O ";
            else
                cout << "X ";
        }
        cout << endl;
    }
    cout << "(O = Empty, X = Reserved)" << endl;
}

void reserveSeat(vector<vector<int>>& seats) {
    int r, c;
    cout << "Enter Row (1-" << ROWS << ") and Seat Number (1-" << COLS << "): ";
    cin >> r >> c;

    if (r < 1 || r > ROWS || c < 1 || c > COLS) {
        cout << "Error: Invalid seat coordinates." << endl;
        return;
    }

    if (seats[r - 1][c - 1] == 1) {
        cout << "Error: Seat is already reserved." << endl;
    } else {
        seats[r - 1][c - 1] = 1;
        cout << "Success: Seat reserved." << endl;
    }
}

void cancelSeat(vector<vector<int>>& seats) {
    int r, c;
    cout << "Enter Row (1-" << ROWS << ") and Seat Number (1-" << COLS << "): ";
    cin >> r >> c;

    if (r < 1 || r > ROWS || c < 1 || c > COLS) {
        cout << "Error: Invalid seat coordinates." << endl;
        return;
    }

    if (seats[r - 1][c - 1] == 0) {
        cout << "Error: Seat is already empty." << endl;
    } else {
        seats[r - 1][c - 1] = 0;
        cout << "Success: Reservation cancelled." << endl;
    }
}

void analyzeRows(const vector<vector<int>>& seats) {
    int fullRows = 0;
    int partialRows = 0;
    int emptyRows = 0;

    for (int i = 0; i < ROWS; ++i) {
        int occupiedCount = 0;
        
        for (int j = 0; j < COLS; ++j) {
            if (seats[i][j] == 1) {
                occupiedCount++;
            }
        }

        if (occupiedCount == COLS) {
            fullRows++;
        } else if (occupiedCount == 0) {
            emptyRows++;
        } else {
            partialRows++;
        }
    }

    cout << "\n--- Occupancy Analysis ---" << endl;
    cout << "Fully Occupied Rows:  " << fullRows << endl;
    cout << "Partially Occupied:   " << partialRows << endl;
    cout << "Completely Empty Rows:" << emptyRows << endl;
}